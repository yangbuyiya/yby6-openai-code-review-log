# OpenAi ä»£ç è¯„å®¡. æ¨¡å¼: gpt-4o 
### ğŸ˜€ä»£ç è¯„åˆ†ï¼š80
#### ğŸ˜€ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š
è¯¥ä»£ç æ®µä¸»è¦è¿›è¡Œä»£ç å®¡æŸ¥çš„åŠŸèƒ½ï¼Œåˆ©ç”¨ä¸åŒçš„æ¨¡å‹è¿›è¡Œåˆ†æï¼Œå¹¶å‘ä¸åŒçš„APIå‘é€è¯·æ±‚ï¼Œå¤„ç†è¯„å®¡æ—¥å¿—ã€‚åœ¨ä¾èµ–ç®¡ç†å’Œä»£ç å®ç°éƒ¨åˆ†æœ‰æ‰€ä¼˜åŒ–ã€‚
#### âœ…ä»£ç ä¼˜ç‚¹ï¼š
1. ä»£ç ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘ä¸¥è°¨ï¼Œæ˜“äºç»´æŠ¤ã€‚
2. é€šè¿‡æ¡ä»¶åˆ¤æ–­é€‰æ‹©ä¸åŒæ¨¡å‹çš„APIï¼Œå¢å¼ºäº†çµæ´»æ€§ã€‚
3. æ³¨é‡Šæ¸…æ™°ï¼Œä¾¿äºç†è§£æ¯ä¸ªé€»è¾‘å—çš„ç›®çš„ã€‚
#### ğŸ¤”é—®é¢˜ç‚¹ï¼š
1. ç›´æ¥åœ¨ä»£ç ä¸­ç¡¬ç¼–ç äº†æ•æ„Ÿçš„APIå¯†é’¥ï¼Œè¿™ä¼šå¯¼è‡´å®‰å…¨éšæ‚£ã€‚
2. éƒ¨åˆ†ä¾èµ–è¢«æ³¨é‡Šæ‰ï¼Œè€ƒè™‘æ˜¯å¦ä»éœ€ä¿ç•™æˆ–åˆ é™¤ï¼Œä»¥é¿å…æ··æ·†ã€‚
3. ä»£ç ä¸­çš„è¾“å‡ºè¯­å¥æ²¡æœ‰å®ç°æ—¥å¿—è®°å½•ï¼Œå¯èƒ½å¯¼è‡´éš¾ä»¥è¿½è¸ªæ‰§è¡Œè·¯å¾„ã€‚
4. ä½¿ç”¨ `Exception` æ˜¯è¿‡äºæ³›æ³›çš„å¼‚å¸¸å¤„ç†ï¼Œå»ºè®®ç»†åŒ–æˆ `IOException`ã€‚
#### ğŸ¯ä¿®æ”¹å»ºè®®ï¼š
1. å°†APIå¯†é’¥å¤–éƒ¨åŒ–ä¸ºç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ï¼Œé¿å…ç¡¬ç¼–ç ã€‚
2. æ£€æŸ¥è¢«æ³¨é‡Šæ‰çš„ä¾èµ–ï¼Œè‹¥ä¸å†ä½¿ç”¨ï¼Œè¯·å®Œå…¨åˆ é™¤ï¼Œæé«˜å¯è¯»æ€§ã€‚
3. è€ƒè™‘ä½¿ç”¨æ—¥å¿—æ¡†æ¶ï¼ˆå¦‚SLF4Jï¼‰æ¥æ›¿ä»£ `System.out.println`ï¼Œä»¥æ›´å¥½æ§åˆ¶æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºæ ¼å¼ã€‚
4. åœ¨å¼‚å¸¸å¤„ç†æ—¶ï¼Œä½¿ç”¨æ›´å…·ä½“çš„å¼‚å¸¸ç±»å–ä»£ `Exception`ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
#### ğŸ’»ä¿®æ”¹åçš„ä»£ç ï¼š
```java
import java.io.*;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.charset.StandardCharsets;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class Yby6OpenAiCodeReview {
    private static final Logger logger = LoggerFactory.getLogger(Yby6OpenAiCodeReview.class);

    private static String codeReview(String model, String diffCode) throws IOException {
        String token, llmUrl;
        if (model.contains("gpt")) {
            llmUrl = "https://api.mihoyo.bf/v1/chat/completions";
            token = System.getenv("API_KEY"); // ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨å¯†é’¥
        } else {
            llmUrl = "https://open.bigmodel.cn/api/paas/v4/chat/completions";
            token = BearerTokenUtils.getToken(apiKeySecret);
        }
        URL url = new URL(llmUrl);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("POST");
        connection.setDoOutput(true);

        ChatCompletionRequest chatCompletionRequest = new ChatCompletionRequest();
        chatCompletionRequest.setModel(model);
        // ... å…¶ä»–ä»£ç ä¿æŒä¸å˜
    }
}
```
